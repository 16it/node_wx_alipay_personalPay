nodeJS版个人支付免签系统
技术栈 Koa2 + Vue + Mysql + Redis 

## Api 版本出炉了

1. 去掉99.99%的功能，只有订单支付这一个逻辑，并且完全独立；

2. 提供完整的服务端源代码，并提供详细Api文档和代码注释;

3. 开源，你可以随时下载服务端最新的代码!

4. 新的git地址 https://github.com/yioMe/nodejs_wx_aipay_api
 

5. 已经购买客户端的可以直接使用Api版；



-------------------------------------------


此项目主要用来解决没有营业执照，想使用微信和支付宝收款的个人开发者，收款的逻辑在/api/addons/pay.js文件里，只需要收款功能的请直接使用Api版本支持任意语言对接开发，支持回调;


特点：支付回调通知，0手续费实时到账（不经过任何第三方，直接到账微信/支付宝余额），全部服务端源代码，支持php/java/python等语言直接接入(请使用Api版本傻瓜式接入)


实现原理： 监听支付宝客户端推送信息，并实时回调服务器，最安全的一种方式；

后台Demo地址: http://pay.yio.me 账号密码 admin

支付Demo地址: http://pay.yio.me/#/goods/DwnNGCW4VLk1CjemIiUqf

客户端地址： http://pay.yio.me/#/goods/74ct1zBzZBW8YGFBKe-Yf

#疑问

问：资金多久到账？
 
答： 实时到账，直接到账微信/支付宝余额，不经过任何第三方；

问：会掉单吗？

答： 保持客户端和服务端网络畅通99.99%不会掉单!

问：这个服务端是什么意思，客户端是什么意思?

答: 服务端源码是用来接收客户端推送收款信息，客户端是监听支付宝和微信的收款信息并实时推送到服务器;

问: 微信公众号可以使用吗?

答： 可以


安装方式

    !!! 依赖nodeJS（必须） + mysql（必须） + redis 环境 （Api版本没有限制下单频率非必须Redis）

    1.下载全部源码；

    2.修改 /com目录中 config.js 和 email.js 文件；

    3.在根目录中运行 npm install 安装依赖；

    4.在根目录中运行 node app.js 默认端口80，没有错误信息,访问服务器地址即可访问，如果80端口被占用，请开启其他端口或使用Nginx转发;

    5.监听运行建议使用 pm2 ;
    
----------
使用方法

    1.添加商品

   ![添加商品][1]

  注意，这里的价格设置的是一元
  
  2.上传收款二维码
  
   ![收款二维码][2]

   收款二维码和商品价格的关系：

        用户付款后 -> 客户端通知后台 微信 或者 支付宝，收到的金额，后台做相应的处理;

        为了避免同一金额在同一时间被支付，订单有效期为5分钟，在商品的金额上随机下调,范围0.10元，那么一个1元的商品需要上传 1.00、0.99、0.98 ... 0.92 、0.91 十个微信+支付宝收款二维码；

3.商品的地址统一是

    http://你的服务器地址/#/goods/DwnNGCW4VLk1CjemIiUqf

    "DwnNGCW4VLk1CjemIiUqf"是商品nanoid

4.客户端配置说明

    api 地址填写： http(s)://你的服务器地址/addons/pay/ 注意：必须以反斜杠结尾

    签名密匙填写： config.js里的 secretkey 值
    
    点击保存提示配置成功即可，没有其他设置!
    

5.请把支付宝/微信/收款客户端加入手机清理白名单，并保持网络畅通；

6.全部代码是开源的，客户端需要赞助使用；

最后：

    客户端需赞助地址        

    http://pay.yio.me/#/goods/74ct1zBzZBW8YGFBKe-Yf

    

    第一次价格20元，后面会持续涨价2018年12月16日至2018年12月31日。
    
    第二次价格40元，后面会持续涨价并更新，2019年01月01日至2019年01月10日。

 
   [1]: http://static.yio.me/1544963117843.png

   [2]: http://static.yio.me/1544963317220.png
