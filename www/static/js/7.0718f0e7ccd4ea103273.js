webpackJsonp([7],{"8k13":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{goodsData:[],nanoid:this.$route.params.id,show:!1,email:"",pay_type:!1,centerDialogVisible:!1}},mounted:function(){this.findOne()},methods:{findOne:function(){var t=this;t.$axios({url:"/api/goodsfindone",method:"get",params:{nanoid:t.nanoid}}).then(function(e){-1==e.data.code?(t.$message.error(e.data.msg),t.show=!1):(t.goodsData=e.data.data,document.title=e.data.data.goods_name+"--让支付变简单点",t.show=!0)})},pop:function(){var t=this;t.$prompt("请输入邮箱，接收商品。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"邮箱格式不正确"}).then(function(e){var a=e.value;t.email=a,t.centerDialogVisible=!0}).catch(function(){t.$message({type:"info",message:"取消购买"})})},pay:function(){var t=this;t.$axios({url:"/api/orderadd",method:"post",data:{nanoid:t.nanoid,email:t.email,pay_type:0==t.pay_type?"alipay":"wechat"}}).then(function(e){-1!=e.data.code?(t.$message({type:"success",message:e.data.msg}),t.$router.push("/pay/"+e.data.data.order_id)):t.$message({type:"info",message:e.data.msg})})}},watch:{$route:function(t,e){this.nanoid=t.params.id,this.findOne()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("el-container",{staticStyle:{"max-width":"750px",margin:"0 auto"}},[a("el-header",[t._v("\n        "+t._s(t.goodsData.goods_name)+"\n    ")]),t._v(" "),a("el-main",{staticStyle:{"padding-top":"0px"}},[a("el-tag",{staticStyle:{"margin-bottom":"10px"}},[t._v("价格￥"+t._s(t.goodsData.price))]),t._v(" "),a("el-tag",{attrs:{type:"danger"}},[t._v("随机减免")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.goodsData.content)}})],1),t._v(" "),a("el-footer",[a("span",{staticStyle:{width:"100%",display:"inline-block","font-size":"1.5em","font-weight":"400"},on:{click:function(e){t.pop()}}},[t._v("立即购买")])]),t._v(" "),a("el-dialog",{attrs:{title:"请选择支付方式",visible:t.centerDialogVisible,width:"80%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#00a9f9","active-text":"微信支付","inactive-text":"支付宝支付"},model:{value:t.pay_type,callback:function(e){t.pay_type=e},expression:"pay_type"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.pay(),t.centerDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1):t._e()},staticRenderFns:[]};var o=a("C7Lr")(n,i,!1,function(t){a("UABn")},null,null);e.default=o.exports},UABn:function(t,e){}});