webpackJsonp([3],{"A0+5":function(e,a){},RcPq:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={data:function(){return{order_id:this.$route.params.orderid,orderData:[],minutes:0,seconds:0,mainShow:!1,timer:"",expired:!0,device:"mobile",isWeixin:!1,pay_status:"",pay_ok:!1}},mounted:function(){if(this.getOrder(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){this.device="mobile";var e=navigator.userAgent.toLowerCase();this.isWeixin=-1!=e.indexOf("micromessenger")}else this.device="PC";this.init()},methods:{init:function(){this.pay_status=setInterval(this.getPayStatus,2e3)},getPayStatus:function(){var e=this;e.$axios({url:"/api/orderstatus",method:"get",params:{order_id:e.order_id}}).then(function(a){-1==a.data.code?(e.$message({type:"info",message:a.data.msg}),clearInterval(e.pay_status)):"ok"==a.data.data.status&&(clearInterval(e.pay_status),clearInterval(e.timer),e.pay_ok=!0)})},time:function(e){var a=this,t=e;a.timer=setInterval(function(){t>=0?(a.minutes=Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60),a.seconds=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),--t):(a.expired=!1,clearInterval(a.timer),clearInterval(a.pay_status))},1e3)},getOrder:function(){var e=this,a=this;a.$axios({url:"/api/getorderid",method:"get",params:{order_id:a.order_id}}).then(function(t){if(-1==t.data.code)a.$message({type:"info",message:t.data.msg});else{a.orderData=t.data.data,e.mainShow=!0,e.time(t.data.time/1e3);new QRCode("img",{text:t.data.data.pay_url,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}})}},watch:{$route:function(e,a){this.order_id=e.params.orderid,this.getOrder(),clearInterval(this.timer),clearInterval(this.pay_status)}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.mainShow,expression:"mainShow"}],staticClass:"container"},[t("div",{staticClass:"header"},[t("div",{class:[{logowechat:"wechat"==e.orderData.pay_type,logo:"alipay"==e.orderData.pay_type}]})]),e._v(" "),t("div",{staticClass:"mainbody"},[t("div",{staticClass:"realprice"},[e._v("￥"+e._s(e.orderData.pay_price))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.orderData.price!=e.orderData.pay_price,expression:"orderData.price != orderData.pay_price"}],staticClass:"discountprice"},[t("del",[e._v("原价:￥"+e._s(e.orderData.price))]),e._v("，随机立减:￥"+e._s(Math.floor(100*(e.orderData.price-e.orderData.pay_price))/100))]),e._v(" "),t("div",{staticClass:"qrcode"},[t("div",{staticClass:"image",attrs:{id:"img"}}),e._v(" "),t("div",{class:["logo",{"logologo-alipay":"alipay"==e.orderData.pay_type,"hidden-xs":!0}]}),e._v(" "),t("div",{class:["expired",{hidden:1==e.expired}]}),e._v(" "),t("div",{class:["paid",{hidden:0==e.pay_ok}]})]),e._v(" "),t("div",{staticClass:"remainseconds"},[t("div",{staticClass:"time minutes"},[t("b",[e._v(e._s(e.minutes))]),e._v(" "),t("em",[e._v("分")])]),e._v(" "),t("div",{staticClass:"colon"},[e._v(":")]),e._v(" "),t("div",{staticClass:"time seconds"},[t("b",[e._v(e._s(e.seconds))]),e._v(" "),t("em",[e._v("秒")])])]),e._v(" "),t("div",{staticClass:"tips"},["mobile"==e.device?t("div",["alipay"!=e.orderData.pay_type?t("div",[1==e.isWeixin?t("div",[e._v("请长按二维码进行支付")]):t("div",[e._v("请截屏后打开"+e._s("alipay"!=e.orderData.pay_type?"微信":"支付宝")+",从相册选择二维码图片")])]):t("div",[0==e.isWeixin?t("div",[e._v("请截屏后，打开"+e._s("alipay"!=e.orderData.pay_type?"微信":"支付宝")+"，从相册选择二维码图片")]):t("div",[t("a",{staticClass:"btn btn-info btn-lg",attrs:{href:e.orderData.pay_url}},[e._v("启动"+e._s("alipay"!=e.orderData.pay_type?"微信":"支付宝")+"进行支付")])])])]):t("div",[e._v("\n                打开"+e._s("alipay"!=e.orderData.pay_type?"微信":"支付宝")+"「扫一扫」\n            ")])])])])},staticRenderFns:[]};var s=t("C7Lr")(i,r,!1,function(e){t("pieQ"),t("A0+5"),t("qWSB")},"data-v-2edf3406",null);a.default=s.exports},pieQ:function(e,a){},qWSB:function(e,a){}});